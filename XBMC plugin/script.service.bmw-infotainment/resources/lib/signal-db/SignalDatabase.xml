<?xml version="1.0" encoding="UTF-8"?>

<!-- XSL sheet for viewing -->
<?xml-stylesheet type="text/xsl" href="SignalDatabase.xsl"?>

<!--
	BMW IBUS signal database
	references: 

-->


<IBUS>

	<!-- IBUS Communication protocol definition -->
	<COM-settings>
		<BaudRate>9600</BaudRate>
		<DatBits>8</DatBits>
		<Parity>Even</Parity>
		<StopBits>1</StopBits>
		<Handshake>none</Handshake>
	</COM-settings>
	
	<!-- IBUS Message definition -->
	<MESSAGE>
	
		<!-- SourceID -and DestinationID descriptions -->
		<DEVICES>
			<byte val="0x00" ref="IBUS_DEV_GM">Body Module</byte>
			<byte val="0x18" ref="IBUS_DEV_CDC">CD Changer</byte>
			<byte val="0x28" ref="IBUS_DEV_FUH">Radio controlled clock</byte>
			<byte val="0x30" ref="IBUS_DEV_CCM">Check control module</byte>
			<byte val="0x3B" ref="IBUS_DEV_GT">Graphics driver (in navigation system)</byte>
			<byte val="0x3F" ref="IBUS_DEV_DIA">Diagnostic</byte>
			<byte val="0x40" ref="IBUS_DEV_FBZV">Remote control central locking</byte>
			<byte val="0x43" ref="IBUS_DEV_GTF">Graphics driver for rear screen (in navigation system)</byte>
			<byte val="0x44" ref="IBUS_DEV_EWS">Immobiliser</byte>
			<byte val="0x46" ref="IBUS_DEV_CID">Central information display (flip-up LCD screen)</byte>
			<byte val="0x50" ref="IBUS_DEV_MFL">Multi function steering wheel</byte>
			<byte val="0x51" ref="IBUS_DEV_MM">Mirror memory</byte>
			<byte val="0x5B" ref="IBUS_DEV_IHK">Integrated heating and air conditioning</byte>
			<byte val="0x60" ref="IBUS_DEV_PDC">Park distance control</byte>
			<byte val="0x67" ref="IBUS_DEV_ONL">unknown</byte>
			<byte val="0x68" ref="IBUS_DEV_RAD">Radio</byte>
			<byte val="0x6A" ref="IBUS_DEV_DSP">Digital signal processing audio amplifier (DSP)</byte>
			<byte val="0x72" ref="IBUS_DEV_SM1">Seat memory</byte>
			<byte val="0x76" ref="IBUS_DEV_CDCD">CD changer, DIN size.</byte>
			<byte val="0x7F" ref="IBUS_DEV_NAVE">Navigation (Europe)</byte>
			<byte val="0x80" ref="IBUS_DEV_IKE">Instrument cluster electronics</byte>
			<byte val="0x9B" ref="IBUS_DEV_MM1">Mirror memory</byte>
			<byte val="0x9C" ref="IBUS_DEV_MM2">Mirror memory</byte>
			<byte val="0xA0" ref="IBUS_DEV_FMID">Rear multi-info-display</byte>
			<byte val="0xA4" ref="IBUS_DEV_ABM">Air bag module</byte>
			<byte val="0xA8" ref="IBUS_DEV_KAM">unknown</byte>
			<byte val="0xAC" ref="IBUS_DEV_ASP">unknown</byte>
			<byte val="0xB0" ref="IBUS_DEV_SES">Speed recognition system</byte>
			<byte val="0xBB" ref="IBUS_DEV_NAVJ">Navigation (Japan)</byte>
			<byte val="0xBF" ref="IBUS_DEV_GLO">Global, broadcast address</byte>
			<byte val="0xC0" ref="IBUS_DEV_MID">Multi-info display</byte>
			<byte val="0xC8" ref="IBUS_DEV_TEL">Telephone</byte>
			<byte val="0xD0" ref="IBUS_DEV_LCM">Light control module</byte>
			<byte val="0xDA" ref="IBUS_DEV_SM2">Seat memory</byte>
			<byte val="0xE0" ref="IBUS_DEV_IRIS">Integrated radio information system</byte>
			<byte val="0xE7" ref="IBUS_DEV_ANZV">Front display</byte>
			<byte val="0xE8" ref="IBUS_DEV_ISP">unknown</byte>
			<byte val="0xED" ref="IBUS_DEV_TV">Television</byte>
			<byte val="0xF0" ref="IBUS_DEV_BMBT">On-board monitor operating part</byte>
			<byte val="0xF5" ref="IBUS_DEV_CSU">unknown</byte>
			<byte val="0xFF" ref="IBUS_DEV_LOC">Local</byte>
		</DEVICES>

		
		<DATA>
		
					
			<!-- Operations, first byte in 'data' -->
			<CATEGORY type="operations" offset="0">
				<byte val="0x01" ref="IBUS_MSG_DEV_POLL">Poll any device</byte>
				<byte val="0x02" ref="IBUS_MSG_DEV_READY">Poll response from device (answer to poll message)</byte>
				<byte val="0x10" ref="IBUS_MSG_IGN_">Ignition status request</byte>
				<byte val="0x0C">External lights, boot lid and lock/unlock car</byte>
				<byte val="0x11" ref="IBUS_MSG_IGN_STATUS">Ignition key status</byte>
				<byte val="0x13" ref="IBUS_MSG_IKE_STATE">IKE informs about its state</byte>
				<byte val="0x14">Country coding request</byte>
				<byte val="0x15">Country coding response?. Set unit on IKE.</byte>
				<byte val="0x18">Speed and rpm</byte>
				<byte val="0x1A"></byte>
				<byte val="0x23"></byte>
				<byte val="0x24">IKE data request</byte>
				<byte val="0x2B">LED command to BM </byte>
				<byte val="0x2C">Display Phone symbol</byte>
				<byte val="0x31"></byte>
				<byte val="0x32" ref="IBUS_MSG_VOLUME_CTRL">Volume adjustment (wheel button and BMBT button)</byte>
				<byte val="0x38">CD status and track info, request</byte>
				<byte val="0x39">CD status and track info, response</byte>
				<byte val="0x3B" ref="IBUS_MSG_MFL_BUTTON">Steering wheel button action</byte>
				<byte val="0x40">Set date and time </byte>
				<byte val="0x41">OBC get and reset value</byte>
				<byte val="0x46">Menu commands to NAV </byte>
				<byte val="0x47" ref="IBUS_MSG_BMBT_INFO">INFO/SELECT board monitor button</byte>
				<byte val="0x48" ref="IBUS_MSG_BMBT_BUTTON">Board monitor button action</byte>
				<byte val="0x49" ref="IBUS_MSG_BMBT_RIGHT_KNOB">Board monitor right-knob turn left/right</byte>
				<byte val="0x4A">LED on left BM button</byte>
				<byte val="0x4F"></byte>
				<byte val="0x5D">unknown</byte>
				<byte val="0x6D" ref="IBUS_MSG_MFL_BUTTON">Side-view mirror button action</byte>
				<byte val="0x72" ref="IBUS_MSG_REMOTE_KEY">Remote key button action</byte>
				<byte val="0x74" ref="IBUS_MSG_IGN_KEY_STATUS">Ignition status response</byte>
				<byte val="0x76">External lights</byte>
				<byte val="0x79">unknown</byte>
				<byte val="0x7A">Window and door message, interior light control</byte>
				<byte val="0xA2">NAV position and time</byte>
				<byte val="0xA5"></byte>
			</CATEGORY>


			<!-- 
				* TODO: image reference attribute. position as attribute? 
			
			-->

			<!-- ignition key buttons (bit-mapped but states won't occur simultaneously)  -->
			<category type="?" ref="IBUS_MSG_REMOTE_KEY">
				<byte val="0x00" name="ign-key.acc"/>
				<byte val="0x01" name="ign-key.on"/>
				<byte val="0x02" name="ign-key.starter"/>
			</category>

			<!-- remote key buttons -->
			<category type="button" ref="IBUS_MSG_REMOTE_KEY">
				<byte val="0x12" name="remote-key.lock"/>
				<byte val="0x22" name="remote-key.unlock"/>
				<byte val="0x42" name="remote-key.boot-lid"/>
				<byte val="0x02" name="remote-key.release"/>
			</category>
			
			<!-- Volume control for steering wheel buttons (and left turn knob on board monitor) -->	
			<category type="button" ref="IBUS_MSG_VOLUME_CTRL">
				 <byte val="0x11" name="volume-up.push"/>
				 <byte val="0x31" name="volume-up.release"/>
				 <byte val="0x10" name="volume-down.push"/>
				 <byte val="0x30" name="volume-down.release"/>
			</category>
			
			<!-- Steering wheel buttons -->
			<category type="button" ref="IBUS_MSG_MFL_BUTTON">
				<byte val="0x01" name="next.push"/>
				<byte val="0x21" name="next.release"/>
				<byte val="0x08" name="previous.push"/>
				<byte val="0x28" name="previous.release"/>					
				<byte val="0x80" name="RT.push"/>
				<data val="0x80" name="voice.push"/>
				<data val="0x90" name="voice.hold"/>
				<data val="0xA0" name="voice.release"/>					
			</category>
				
		
			<!-- Board monitor buttons -->	
			<category type="button" ref="IBUS_MSG_BMBT_BUTTON">
			
				<!-- Buttons, left side -->			
				<byte val="0x11" name="one.push"/>
				<byte val="0x51" name="one.hold"/>
				<byte val="0x91" name="one.release"/>
				
				<byte val="0x02" name="four.push"/>
				<byte val="0x42" name="four.hold"/>
				<byte val="0x82" name="four.release"/>
				
				<byte val="0x01" name="two.push"/>
				<byte val="0x41" name="two.hold"/>
				<byte val="0x81" name="two.release"/>
				
				<byte val="0x13" name="five.push"/>
				<byte val="0x52" name="five.hold"/>
				<byte val="0x93" name="five.release"/>
				
				<byte val="0x12" name="three.push"/>
				<byte val="0x52" name="three.hold"/>
				<byte val="0x92" name="three.release"/>
				
				<byte val="0x03" name="six.push"/>
				<byte val="0x43" name="six.hold"/>
				<byte val="0x83" name="six.release"/>
				
				<byte val="0x31" name="FM.push"/>
				<byte val="0x71" name="FM.hold"/>
				<byte val="0xB1" name="FM.release"/>
				
				<byte val="0x21" name="AM.push"/>
				<byte val="0x61" name="AM.hold"/>
				<byte val="0xA1" name="AM.release"/>
				
				<byte val="0x23" name="mode.push"/>
				<byte val="0x63" name="mode.hold"/>
				<byte val="0xA3" name="mode.release"/>
				
				<byte val="0x30" name="source.push"/>
				<byte val="0x70" name="source.hold"/>
				<byte val="0xB0" name="source.release"/>

				<byte val="0x06" name="left-knob.push"/>
				<byte val="0x46" name="left-knob.hold"/>
				<byte val="0x86" name="left-knob.release"/>
				
				<!-- Buttons, right side -->	
				<byte val="0x24" name="eject.push"/>
				<byte val="0x64" name="eject.hold"/>
				<byte val="0xA4" name="eject.release"/>
				
				<byte val="0x08" name="phone.push"/>
				<byte val="0x48" name="phone.hold"/>
				<byte val="0x88" name="phone.release"/>	
				
				<byte val="0x14" name="reverse-tape.push"/>
				<byte val="0x54" name="reverse-tape.hold"/>
				<byte val="0x94" name="reverse-tape.release"/>
				
				<byte val="0x07" name="clock.push"/>
				<byte val="0x47" name="clock.hold"/>
				<byte val="0x87" name="clock.release"/>	

				<byte val="0x04" name="tone.push"/>
				<byte val="0x44" name="tone.hold"/>
				<byte val="0x84" name="tone.release"/>
				
				<byte val="0x10" name="previous.push"/>
				<byte val="0x50" name="previous.hold"/>
				<byte val="0x90" name="previous.release"/>
				
				<byte val="0x00" name="next.push"/>
				<byte val="0x40" name="next.hold"/>
				<byte val="0x80" name="next.release"/>

				<byte val="0x34" name="menu.push"/>
				<byte val="0x74" name="menu.hold"/>
				<byte val="0xB4" name="menu.release"/>
				
				<byte val="0x05" name="right-knob.push"/>
				<byte val="0x45" name="right-knob.hold"/>
				<byte val="0x85" name="right-knob.release"/>
		</category>

		<!-- INFO-SELECT button (has a special identifier) -->
		<category type="button" ref="IBUS_MSG_BMBT_INFO">
		
				<byte val="0x00 0x38" name="info.push"/>
				<byte val="0x00 0x78" name="info.hold"/>
				<byte val="0x00 0xB8" name="info.release"/>

				<byte val="0x00 0x0F" name="select.push"/>
				<byte val="0x00 0x4F" name="select.hold"/>
				<byte val="0x00 0x8F" name="select.release"/>				
		</category>

		<!-- right knob button (has a special identifier) -->
		<category type="button" ref="IBUS_MSG_BMBT_RIGHT_KNOB">
				<byte val="0x01" name="right-knob.turn-right"/>
				<byte val="0x81" name="right-knob.turn-left"/>
		</category>	

		
		</DATA>
	</MESSAGE>
</IBUS>